// Inscription de l'utilisateur
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $username = $_POST['username'];
    $password = $_POST['password'];  // Mot de passe en clair

    // Vérifie si l'utilisateur existe déjà
    $stmt = $bdd->prepare("SELECT * FROM users WHERE username = ?");
    $stmt->execute([$username]);
    $user = $stmt->fetch(PDO::FETCH_ASSOC);

    if ($user) {
        $error = "Ce nom d'utilisateur est déjà pris.";
    } else {
        // Insertion du mot de passe en clair dans la base de données
        $insert_stmt = $bdd->prepare("INSERT INTO users (username, password) VALUES (?, ?)");
        if ($insert_stmt->execute([$username, $password])) {
            $_SESSION['user_id'] = $bdd->lastInsertId();
            $_SESSION['username'] = $username;
            header('Location: projet_V1.php');
            exit;
        } else {
            $error = 'Une erreur est survenue lors de la création du compte.';
        }
    }
}
?>